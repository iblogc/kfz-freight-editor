# 孔夫子旧书网 - 出售中商品运费模板批量修改工具

这是一个专为孔夫子旧书网（kongfz.com）卖家设计的桌面 GUI 工具。它可以根据预设的价格区间，自动筛选并批量修改“出售中”商品的运费模板。

## 核心功能

- **自动化处理**：无需手动逐条修改，支持按价格下限和上限自动匹配商品。
- **登录集成**：内置孔网登录逻辑，安全获取会话 Cookie。
- **模板管理**：支持自定义 CSV 修改模板，灵活配置不同价格区间的运费策略。
- **过程透明**：实时日志窗口展示运行状态，处理完成后自动生成详细的汇总报告和分类商品 CSV。
- **离线记录**：所有处理过的商品数据都会保存到本地带时间戳的文件夹中，方便追溯。

## 技术栈

- **语言**: Python 3.12+
- **GUI 框架**: Python 内置 `Tkinter` (轻量、高效)
- **网络库**: `requests` (用于 API 通信)
- **打包工具**: `Nuitka` (将 Python 脚本打包为高性能的可执行文件)

## 快速开始

### 1. 环境准备

建议使用 [uv](https://github.com/astral-sh/uv) 管理项目依赖。

```bash
# 同步依赖
uv sync
```

### 2. 运行程序

```bash
python main.py
```

### 3. 使用步骤

1. **准备模板**：创建一个 CSV 文件（如 `template.csv`），格式如下：

   | 价格下限 | 价格上限 | 运费模板名字 |
   | -------- | -------- | ------------ |
   | 0.01     | 5        | 3元运费模板  |
   | 5.01     | 10       | 5元运费模板  |

2. **选择文件**：在程序界面中点击“浏览”选择该 CSV 文件。
3. **输入配置**：填写你的孔夫子旧书网用户名和密码。
4. **开始执行**：点击“开始执行”，程序将开始自动登录、获取配置、下载商品列表并执行批量修改。

## 构建可执行文件

项目提供了 Nuitka 打包脚本，可以将程序打包成单文件的 `.exe` (Windows) 或可执行二进制文件 (macOS/Linux)。

```bash
python scripts/build_nuitka.py
```

生成的文件将位于 `build/` 目录下。

## 项目结构

```
kfz-freight-editor/
├── src/
│   ├── api.py         # 孔网 API 封装
│   ├── gui.py         # Tkinter GUI 界面实现
│   ├── logic.py       # 批量处理业务逻辑
│   ├── login.py       # 登录管理与验证
│   └── utils.py       # 日志与辅助函数
├── scripts/
│   └── build_nuitka.py # 打包脚本
├── main.py            # 程序入口点
└── pyproject.toml     # 项目依赖配置
```

## 注意事项

- **安全性**：本工具仅用于辅助卖家管理商品，请妥善保管账号权限。
- **频率限制**：程序内置了简单的延时机制以避免请求过快，建议在运行期间不要进行大并发操作。
- **数据备份**：程序在修改前会将商品数据抓取到本地，建议在执行大规模修改前先核对生成的 CSV 文件。